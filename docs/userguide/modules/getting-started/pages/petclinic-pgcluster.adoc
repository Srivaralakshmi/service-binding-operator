= Connecting PetClinic application to operator-backed PostgreSQL database
:quickstart-namespace: my-petclinic

The goal of this quick start guide is to:

* Provide an overview of {servicebinding-title}.
* Provide a list of prerequisites to be configured on your Kubernetes
cluster.
* Create a PostgreSQL database instance
* Deploy the application
* Connect the application to the database with Service Binding

For this quick start, we are using a PostgreSQL database and a simple
application using the
https://github.com/spring-projects/spring-petclinic[Spring PetClinic Sample Application]
enriched by https://github.com/spring-cloud/spring-cloud-bindings[Spring Cloud Bindings]
library. This will allow you to understand how {servicebinding-title}
can be used to simplify the connection between a
service, like a database and the application.

To illustrate what we are going to do, here is a visual representation
of the application we are going to setup.

image:pgcluster-spring-boot.png[pgcluster-spring-boot]

In this configuration, we leverage the {servicebinding-title}, to
collect the binding data from the PostgreSQL database and project them
into the sample application.

Before starting, we invite you to refer to the
xref:#prerequisites[] section to make sure you have all the
needed components configured on your K8s cluster.

The quick start consists of three main steps:

. link:#create-a-postgresql-database-instance[Create a PostgreSQL
database instance]
. link:#deploy-the-application[Deploy the application]
. link:#connect-the-application-to-the-database[Connect the application
to the database with Service Binding]

[#prerequisites]
include::partial$common-prerequisities.adoc[]

[#create-a-postgresql-database-instance]
include::partial$deploy-db-pgcluster.adoc[]

[#deploy-the-application]
include::partial$deploy-application.adoc[]

[#connect-the-application-to-the-database]
include::partial$connect-petclinic-pgcluster.adoc[]

== Conclusion
In this sample, we setup an operator-backed database and connected it to an application
using the {servicebinding-title} to collect the connection metadata
and expose them to the application.

To see how connect the application to a database deployed via plain `Deployment`, you can look at
xref:getting-started:quick-start.adoc[]

== Next Steps

include::partial$next-steps.adoc[]
